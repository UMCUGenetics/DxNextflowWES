params {
    genome = '/hpc/cog_bioinf/GENOMES/Homo_sapiens.GRCh37.GATK.illumina/Homo_sapiens.GRCh37.GATK.illumina.fasta'

    gatk_known_indels = '--known /hpc/diaggen/data/databases/GATK_resource_bundle/b37/1000G_phase1.indels.b37.vcf.gz --known /hpc/diaggen/data/databases/GATK_resource_bundle/b37/Mills_and_1000G_gold_standard.indels.b37.vcf.gz'
}

process {
    errorStrategy = 'finish'

    withLabel: FASTQC_0_11_8 {
        cpus = 2
        memory = '1G'
        time = '1h'

        publishDir {
            path = "$params.outdir/QC/FastQC"
            mode = 'copy'
        }
    }

    withLabel: BWA_0_7_17_MEM {
        cpus = 10
        memory = '32G'
        time = '2h'
    }

    withLabel: Sambamba_0_7_0_ViewSort {
        cpus = 10
        memory = '32G'
        time = '2h'
    }

    withLabel: Sambamba_0_7_0_MarkdupMerge {
        cpus = 10
        memory = '32G'
        time = '2h'

        publishDir {
            path = "$params.outdir/mapping"
            mode = 'copy'
        }
    }

    withLabel: GATK_3_8_1_0_gf15c1c3ef_IndelRealigner {
        cpus = 1
        memory = '32G'
        time = '24h'

        publishDir {
            path = "$params.outdir/mapping"
            mode = 'copy'
        }
    }
}

profiles {

    sge {
        process {
            executor = 'sge'
            queue = 'all.q'
            clusterOptions = '-P diaggen'
            errorStrategy = 'finish'
        }

        singularity {
            enabled = true
            runOptions = '-B /hpc:/hpc -B $TMPDIR:$TMPDIR'
            autoMounts = true
        }
    }

    slurm {
        process {
            executor = 'slurm'
            queue = 'cpu'
            errorStrategy = 'finish'
        }

        singularity {
            enabled = true
            runOptions = '-B /hpc:/hpc -B $TMPDIR:$TMPDIR'
            autoMounts = true
        }
    }

    mac {
        docker.enabled = true
        docker.runOptions = '-v /Users:/Users'
        process.errorStrategy = 'finish'
    }
}
